!function(){function e(){document.getElementById("loading").style.display="none"}let i;const{ClassicEditor:t,AutoLink:a,Autosave:l,BalloonToolbar:n,BlockQuote:o,Bold:s,Essentials:d,Heading:m,Italic:r,Link:u,List:c,ListProperties:I,Paragraph:g,WordCount:p,AutoImage:b,ImageBlock:h,ImageCaption:y,ImageInsert:k,ImageInsertViaUrl:A,ImageResize:M,ImageTextAlternative:L,ImageToolbar:O,ImageUpload:w,SimpleUploadAdapter:E}=window.CKEDITOR,{AIAssistant:R,OpenAITextAdapter:T}=window.CKEDITOR_PREMIUM_FEATURES;function J(e,i){const t=document.getElementById("SendmyModal");let a=document.getElementById("suksesModal");i&&(a=document.getElementById("errorModal"));document.getElementById("SendmodalMessage").innerText=e,t.style.display="block",a.style.display="block",document.getElementById("modalClose").onclick=function(){t.style.display="none",a.style.display="none"},window.onclick=function(e){e.target!=t&&e.target!=a||(t.style.display="none",a.style.display="none")}}t.create(document.getElementById("isiTulisan"),{toolbar:{items:["aiCommands","aiAssistant","|","heading","|","bold","italic","|","link","blockQuote","|","insertImage","bulletedList","numberedList"],shouldNotGroupWhenFull:!1},plugins:[R,a,l,n,o,s,d,m,r,u,c,I,T,g,p,b,h,y,k,A,M,L,O,w,E],simpleUpload:{uploadUrl:"https://sabdaliterasi.xyz/api/convert/upload",withCredentials:!0,headers:{"X-CSRF-TOKEN":"eyJhbGciOiJFUzI1NiJ9.eyJleHAiOjk3NDA1MjgwMDAsImp0aSI6ImQyNmM5ZDYzLTQ4NTUtNDhiYi04YjRlLWY3YjA0YmI1ODRjOCIsImxpY2Vuc2VkSG9zdHMiOlsic2FiZGFsaXRlcmFzaS54eXoiLCIqLnNhYmRhbGl0ZXJhc2kueHl6Il0sImZlYXR1cmVzIjpbIioiXSwidmMiOiJiMWNiOWUxOCJ9.b51kPtbdDmR8EIdOH4uHyq5K9LBEWNUofm9LwIRAIxvd8HWm1K8ZHMSWuRLgKFIq-pOPxYAxeQObSAJQsXApow",Authorization:"Bearer eyJhbGciOiJFUzI1NiJ9.eyJleHAiOjk3NDA1MjgwMDAsImp0aSI6ImQyNmM5ZDYzLTQ4NTUtNDhiYi04YjRlLWY3YjA0YmI1ODRjOCIsImxpY2Vuc2VkSG9zdHMiOlsic2FiZGFsaXRlcmFzaS54eXoiLCIqLnNhYmRhbGl0ZXJhc2kueHl6Il0sImZlYXR1cmVzIjpbIioiXSwidmMiOiJiMWNiOWUxOCJ9.b51kPtbdDmR8EIdOH4uHyq5K9LBEWNUofm9LwIRAIxvd8HWm1K8ZHMSWuRLgKFIq-pOPxYAxeQObSAJQsXApow"}},ai:{openAI:{requestHeaders:{Authorization:"Bearer "}}},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","resizeImage"]},balloonToolbar:["aiAssistant","|","bold","italic","|","link","|","bulletedList","numberedList"],heading:{options:[{model:"paragraph",title:"Normal",class:"ck-heading_paragraph"},{model:"heading2",view:"h2",title:"Subjudul",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Sub-Subjudul",class:"ck-heading_heading3"}]},licenseKey:"eyJhbGciOiJFUzI1NiJ9.eyJleHAiOjk3NDA1MjgwMDAsImp0aSI6ImQyZjc4OWVlLWM4YTgtNGRhNC1iNTg0LTU3MTYxZDRlNzgxMCIsImxpY2Vuc2VkSG9zdHMiOlsic2FiZGFsaXRlcmFzaS54eXoiLCIqLnNhYmRhbGl0ZXJhc2kueHl6Il0sImZlYXR1cmVzIjpbIioiXSwidmMiOiIyZmEzZjBkMSJ9.Unm38hPcSu-AJMVEpHJRCQw0Wr5j9GJ_NxUcTY0HJj2481-FLBeRtVQ5PtzY54LR-MLfIjxf4LbxWTEfBXAtyw",link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},menuBar:{isVisible:!0},placeholder:"Mulailah mengetik atau tempel konten Kamu di sini!"}).then((e=>{const t=e.plugins.get("WordCount");document.getElementById("word-count").appendChild(t.wordCountContainer),i=e})).catch((e=>{console.error(e)})),document.getElementById("submitForm").addEventListener("submit",(async function(t){t.preventDefault(),document.getElementById("loading").style.display="flex";const a=new FormData(this),l=a.get("atribusi"),n=a.get("linkMedia");l||a.set("atribusi","___"),n||a.set("linkMedia","___");const o=i.getData();if(!o.trim())return J("Isi Tulisan tidak boleh kosong.",1),void e();if(p<800){return J(`Jumlah Kata minimal 800. Tambahkan ${parseInt(800-p)} kata lagi`,1),void e()}a.set("isiTulisan",o);const s=document.getElementById("fotoPenulis").files[0];if(s){if(!["image/jpg","image/jpeg","image/png","image/webp"].includes(s.type))return J("File harus berupa gambar (JPEG, PNG, WEBP).",1),void e();if(s.size>3145728)return J("Ukuran file gambar tidak boleh lebih dari 3MB.",1),void e();a.set("fotoPenulis",s),async function(t){try{const a=await fetch("/api/verify/kirim-tulisan",{method:"POST",body:t});J((await a.json()).message||"Gagal mengirim tulisan.",a.ok?0:1),e(),a.ok&&(document.getElementById("submitForm").reset(),i&&i.setData(""))}catch(i){J("Terjadi kesalahan, coba lagi nanti.",1),e()}}(a)}else J("Foto penulis wajib diupload.",1),e()}))}();
